<!DOCTYPE html>
<html lang="">
	<head>
		<meta charset="utf-8" />
		<meta name="description" content="Entity-Component - Registry" />
		<script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
		<script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
		<script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
		<script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
		<script src="https://unpkg.com/aframe-gradient-sky@1.0.4/dist/gradientsky.min.js"></script>
		<script src="https://unpkg.com/aframe-extras.tube@%5E3.5.x/dist/aframe-extras.tube.min.js"></script>
		<title>Starfield</title>
		<link rel="apple-touch-icon" href="apple-touch-icon.png" />
		<!-- Place favicon.ico in the root directory -->
		<!-- build:css styles/main.css -->
		<link rel="stylesheet" href="styles/main.css" />
		<!-- endbuild -->
	</head>
	<body>
		<script>
			AFRAME.registerComponent("boxes-logic", {
				schema: {},

				init: function() {
					// console.log(this.el);

					const sceneEl = document.querySelector("a-scene");
					const protoBox = sceneEl.querySelector("#oneBox");
					console.log("sceneEl: " + sceneEl);

					const boxRotat = protoBox.components.animation__rotation;
					console.log("boxRotat: " + boxRotat);

					// const posLimit = 17;
					const scaleLimit = 3;

					for (let i = 0; i < 20; i++) {
						let posLimit = Math.random() * 27
						let randDur = Math.random() * 3600 + 2000
						let newBox = document.createElement("a-box");
						newBox.setAttribute("material", { color: "#EF2D5E" });
						newBox.setAttribute("position", {
							x: Math.random() * Math.floor(posLimit) - 5,
							y: Math.random() * Math.floor(posLimit) - 1,
							z: Math.random() * Math.floor(-30)
						});
						newBox.setAttribute("scale", { x: 2, y: 2, z: 2 });
						newBox.setAttribute("animation", {
							property: "rotation",
							to: { x: 0, y: 360, z: 360 },
							easing: 'easeInBounce',
							dur: randDur,
							// dur: 3600,
							loop: true
						});
						sceneEl.appendChild(newBox);
					}
				}
			});
		</script>
		<a-scene boxes-logic>
			<a-entity
				id="rain"
				particle-system="preset: dust; color: #24CAFF,#000000; particleCount: 5000; maxAge: 1; velocityValue: 0 0 0; rotationAngle: 180; accelerationSpread: 50 50 50;"
			></a-entity>

			<a-entity
				id="oneBox"
				light="type: point; intensity: 2"
			></a-entity>

			<a-entity
				id="ocean"
				ocean="density: 20; width: 50; depth: 50; speed: 4"
				material="color: #9CE3F9; opacity: 0.75; metalness: 1; roughness: 1;"
				rotation="-90 0 0"
				light="type: ambient; intensity: 0.2; color: #f00"
			></a-entity>

			<a-entity
				id="sky"
				geometry="primitive: sphere; radius: 5000"
				material="shader: gradient; topColor: 235 235 245; bottomColor: 100 100 210"
				scale="-1 1 1"
			></a-entity>

			<a-entity id="light" light="type: ambient; color: #888"></a-entity>
		</a-scene>

		<!-- build:js scripts/vendor.js -->
		<script
			type="text/javascript"
			src="/node_modules/jquery/dist/jquery.min.js"
		></script>
		<!-- endbuild -->
		<!-- build:js scripts/main.js -->
		<script src="scripts/main.js"></script>
		<!-- endbuild -->
	</body>
</html>

<!-- Notes via RWW -->
<!-- 
	https://github.com/IdeaSpaceVR/aframe-particle-system-component

 -->
